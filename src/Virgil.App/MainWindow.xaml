<Window x:Class="Virgil.App.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Virgil" Height="720" Width="1080" WindowStartupLocation="CenterScreen">
    <Grid Margin="16">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="180"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <DockPanel Grid.Row="0" LastChildFill="True" Margin="0,0,0,8">
            <TextBlock Text="Virgil — Assistant Système" FontSize="20" FontWeight="Bold" />
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                <Button x:Name="CancelButton" Content="Annuler" Margin="8,0,0,0" Padding="10,6"
                        Click="CancelButton_Click"/>
            </StackPanel>
        </DockPanel>

        <!-- Corps -->
        <Grid Grid.Row="1" ColumnSpacing="12">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="2*"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <!-- Colonne gauche : actions -->
            <ScrollViewer Grid.Column="0" VerticalScrollBarVisibility="Auto">
                <StackPanel>
                    <!-- Monitoring -->
                    <GroupBox Header="Surveillance">
                        <StackPanel>
                            <WrapPanel>
                                <Button Content="Start/Stop Monitoring" Margin="0,0,8,8" Padding="10,6"
                                        x:Name="MonitorButton" Click="MonitorButton_Click"/>
                                <Button Content="Lire températures" Margin="0,0,8,8" Padding="10,6"
                                        Click="ReadTempsButton_Click"/>
                            </WrapPanel>
                        </StackPanel>
                    </GroupBox>

                    <!-- Nettoyage -->
                    <GroupBox Header="Nettoyage" Margin="0,8,0,0">
                        <StackPanel>
                            <WrapPanel>
                                <Button Content="Nettoyage TEMP" Margin="0,0,8,8" Padding="10,6"
                                        Click="CleanButton_Click"/>
                                <Button Content="Caches Navigateurs" Margin="0,0,8,8" Padding="10,6"
                                        Click="CleanBrowsersButton_Click"/>
                                <Button Content="Nettoyage Étendu" Margin="0,0,8,8" Padding="10,6"
                                        Click="CleanExtendedButton_Click"/>
                                <Button Content="Maintenance rapide" Margin="0,0,8,8" Padding="10,6"
                                        Click="QuickMaintenanceButton_Click"/>
                                <Button Content="Maintenance complète" Margin="0,0,8,8" Padding="10,6"
                                        Click="FullMaintenanceButton_Click"/>
                            </WrapPanel>
                        </StackPanel>
                    </GroupBox>

                    <!-- Mises à jour -->
                    <GroupBox Header="Mises à jour" Margin="0,8,0,0">
                        <StackPanel>
                            <WrapPanel>
                                <Button Content="MAJ Apps/Jeux (winget)" Margin="0,0,8,8" Padding="10,6"
                                        Click="UpdateButton_Click"/>
                                <Button Content="WU: Scan" Margin="0,0,8,8" Padding="10,6"
                                        Click="WindowsUpdateButton_Click"/>
                                <Button Content="WU: Download" Margin="0,0,8,8" Padding="10,6"
                                        Click="WindowsUpdateDownloadButton_Click"/>
                                <Button Content="WU: Install" Margin="0,0,8,8" Padding="10,6"
                                        Click="WindowsUpdateInstallButton_Click"/>
                                <Button Content="WU: Restart" Margin="0,0,8,8" Padding="10,6"
                                        Click="WindowsUpdateRestartButton_Click"/>
                                <Button Content="Pilotes (best-effort)" Margin="0,0,8,8" Padding="10,6"
                                        Click="DriverButton_Click"/>
                            </WrapPanel>
                        </StackPanel>
                    </GroupBox>

                    <!-- Processus / Services -->
                    <GroupBox Header="Processus & Services" Margin="0,8,0,0">
                        <StackPanel>
                            <WrapPanel>
                                <Button Content="Top Processus" Margin="0,0,8,8" Padding="10,6"
                                        Click="ProcessesButton_Click"/>
                                <TextBox x:Name="KillPidBox" Width="120" Margin="0,0,8,8"
                                         ToolTip="PID à tuer"/>
                                <Button Content="Tuer PID" Margin="0,0,8,8" Padding="10,6"
                                        Click="KillPidButton_Click"/>
                            </WrapPanel>
                            <WrapPanel>
                                <TextBox x:Name="SvcNameBox" Width="220" Margin="0,0,8,8"
                                         ToolTip="Nom du service"/>
                                <Button Content="Lister Services" Margin="0,0,8,8" Padding="10,6"
                                        Click="ListServicesButton_Click"/>
                                <Button Content="Start" Margin="0,0,8,8" Padding="10,6"
                                        Click="StartServiceButton_Click"/>
                                <Button Content="Stop" Margin="0,0,8,8" Padding="10,6"
                                        Click="StopServiceButton_Click"/>
                                <Button Content="Restart" Margin="0,0,8,8" Padding="10,6"
                                        Click="RestartServiceButton_Click"/>
                            </WrapPanel>
                        </StackPanel>
                    </GroupBox>

                    <!-- Outils -->
                    <GroupBox Header="Outils système" Margin="0,8,0,0">
                        <StackPanel>
                            <WrapPanel>
                                <Button Content="Gestionnaire de périphériques" Margin="0,0,8,8" Padding="10,6"
                                        Click="OpenDeviceManagerButton_Click"/>
                                <Button Content="Nettoyage de disque" Margin="0,0,8,8" Padding="10,6"
                                        Click="OpenDiskCleanupButton_Click"/>
                                <Button Content="Console des services" Margin="0,0,8,8" Padding="10,6"
                                        Click="OpenServicesConsoleButton_Click"/>
                                <Button Content="Flush DNS" Margin="0,0,8,8" Padding="10,6"
                                        Click="FlushDnsButton_Click"/>
                            </WrapPanel>
                            <WrapPanel>
                                <Button Content="Copier le journal" Margin="0,0,8,8" Padding="10,6"
                                        Click="CopyLogButton_Click"/>
                                <Button Content="Exporter le journal" Margin="0,0,8,8" Padding="10,6"
                                        Click="ExportLogButton_Click"/>
                            </WrapPanel>
                        </StackPanel>
                    </GroupBox>
                </StackPanel>
            </ScrollViewer>

            <!-- Colonne droite : avatar + statut -->
            <StackPanel Grid.Column="1">
                <GroupBox Header="Virgil">
                    <local:VirgilAvatar x:Name="AvatarControl" Width="220" Height="220"/>
                </GroupBox>

                <GroupBox Header="État">
                    <StackPanel>
                        <ProgressBar x:Name="TaskProgress" Height="16" Minimum="0" Maximum="100" Margin="0,0,0,6"/>
                        <TextBlock x:Name="StatusText" Text="Prêt."/>
                    </StackPanel>
                </GroupBox>
            </StackPanel>
        </Grid>

        <!-- Journal -->
        <GroupBox Grid.Row="2" Header="Journal">
            <TextBox x:Name="OutputBox" FontFamily="Consolas" AcceptsReturn="True" VerticalScrollBarVisibility="Auto"
                     TextWrapping="Wrap" IsReadOnly="True"/>
        </GroupBox>
    </Grid>
</Window>
