<Window x:Class="Virgil.App.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:controls="clr-namespace:Virgil.App.Controls"
        Title="Virgil" Height="680" Width="1100"
        Background="#0E1014" WindowStartupLocation="CenterScreen">

    <Grid Margin="12">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="260"/>
            <ColumnDefinition Width="*" />
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>   <!-- chat -->
            <RowDefinition Height="*"/>      <!-- contenu -->
            <RowDefinition Height="Auto"/>   <!-- status -->
        </Grid.RowDefinitions>

        <!-- Chat holographique -->
        <controls:VirgilChatPanel x:Name="ChatPanel"
                                  Grid.ColumnSpan="2"
                                  Margin="0,0,0,10" />

        <!-- Colonne gauche : Avatar -->
        <StackPanel Grid.Row="1" Grid.Column="0" VerticalAlignment="Stretch">
            <controls:VirgilAvatar x:Name="AvatarControl"
                                   Width="220" Height="240"
                                   Margin="0,0,0,12"/>

            <!-- Monitoring -->
            <GroupBox Header="Monitoring" Foreground="#DDD" Margin="0,0,0,8">
                <StackPanel>
                    <Button x:Name="MonitorToggleButton" Content="Démarrer le monitoring"
                            Click="MonitorButton_Click" Margin="4"/>
                    <Button Content="Lire températures" Click="ReadTempsButton_Click" Margin="4"/>
                </StackPanel>
            </GroupBox>

            <!-- Processus -->
            <GroupBox Header="Processus" Foreground="#DDD" Margin="0,0,0,8">
                <StackPanel>
                    <Button Content="Top RAM" Click="ProcessesButton_Click" Margin="4"/>
                    <StackPanel Orientation="Horizontal" Margin="4">
                        <TextBox x:Name="KillPidBox" Width="90" Margin="0,0,6,0" />
                        <Button Content="Kill PID" Click="KillPidButton_Click"/>
                    </StackPanel>
                </StackPanel>
            </GroupBox>

            <!-- Services -->
            <GroupBox Header="Services" Foreground="#DDD" Margin="0,0,0,8">
                <StackPanel>
                    <Button Content="Lister (30)" Click="ListServicesButton_Click" Margin="4"/>
                    <TextBox x:Name="SvcNameBox" Margin="4" />
                    <StackPanel Orientation="Horizontal" Margin="4,0,4,4">
                        <Button Content="Start" Click="StartServiceButton_Click" Margin="0,0,6,0"/>
                        <Button Content="Stop" Click="StopServiceButton_Click" Margin="0,0,6,0"/>
                        <Button Content="Restart" Click="RestartServiceButton_Click"/>
                    </StackPanel>
                </StackPanel>
            </GroupBox>
        </StackPanel>

        <!-- Colonne droite : actions principales -->
        <StackPanel Grid.Row="1" Grid.Column="1">
            <!-- Maintenance -->
            <GroupBox Header="Maintenance" Foreground="#DDD" Margin="0,0,0,8">
                <WrapPanel Margin="4">
                    <Button Content="Maintenance rapide" Click="QuickMaintenanceButton_Click" Margin="4"/>
                    <Button Content="Maintenance complète" Click="FullMaintenanceButton_Click" Margin="4"/>
                    <Button Content="Nettoyage TEMP" Click="CleanButton_Click" Margin="4"/>
                    <Button Content="Caches Navigateurs" Click="CleanBrowsersButton_Click" Margin="4"/>
                    <Button Content="Nettoyage étendu" Click="CleanExtendedButton_Click" Margin="4"/>
                </WrapPanel>
            </GroupBox>

            <!-- Mises à jour -->
            <GroupBox Header="Mises à jour" Foreground="#DDD" Margin="0,0,0,8">
                <WrapPanel Margin="4">
                    <Button Content="MAJ Apps/Jeux (winget)" Click="UpdateButton_Click" Margin="4"/>
                    <Button Content="Pilotes" Click="DriverButton_Click" Margin="4"/>
                    <Button Content="Windows Update: Scan" Click="WindowsUpdateButton_Click" Margin="4"/>
                    <Button Content="WU: Download" Click="WindowsUpdateDownloadButton_Click" Margin="4"/>
                    <Button Content="WU: Install" Click="WindowsUpdateInstallButton_Click" Margin="4"/>
                    <Button Content="WU: Restart" Click="WindowsUpdateRestartButton_Click" Margin="4"/>
                </WrapPanel>
            </GroupBox>

            <!-- Outils -->
            <GroupBox Header="Outils" Foreground="#DDD" Margin="0,0,0,8">
                <WrapPanel Margin="4">
                    <Button Content="Copier journal" Click="CopyLogButton_Click" Margin="4"/>
                    <Button Content="Exporter journal" Click="ExportLogButton_Click" Margin="4"/>
                    <Button Content="Gestionnaire de périph." Click="OpenDeviceManagerButton_Click" Margin="4"/>
                    <Button Content="Nettoyage disque" Click="OpenDiskCleanupButton_Click" Margin="4"/>
                    <Button Content="Services.msc" Click="OpenServicesConsoleButton_Click" Margin="4"/>
                    <Button Content="Flush DNS" Click="FlushDnsButton_Click" Margin="4"/>
                </WrapPanel>
            </GroupBox>

            <!-- Journal brut -->
            <TextBox x:Name="OutputBox"
                     Margin="0,4,0,0"
                     FontFamily="Consolas"
                     FontSize="12"
                     TextWrapping="Wrap"
                     AcceptsReturn="True"
                     VerticalScrollBarVisibility="Auto"
                     HorizontalScrollBarVisibility="Disabled"
                     Height="220"
                     IsReadOnly="True"/>
        </StackPanel>

        <!-- Barre d'état -->
        <DockPanel Grid.Row="2" Grid.ColumnSpan="2" LastChildFill="True" Margin="0,8,0,0">
            <ProgressBar x:Name="TaskProgress"
                         Width="220" Height="12"
                         Minimum="0" Maximum="100"
                         Foreground="#27D7FF"
                         Background="#222"
                         Visibility="Collapsed"
                         Margin="8,0"
                         DockPanel.Dock="Left"/>
            <TextBlock x:Name="StatusText"
                       Text="Prêt."
                       Foreground="#CCC"
                       VerticalAlignment="Center"
                       Margin="8,0"/>
        </DockPanel>
    </Grid>
</Window>