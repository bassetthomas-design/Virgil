<Window x:Class="Virgil.App.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:Virgil.App"
        xmlns:controls="clr-namespace:Virgil.App.Controls"
        Title="Virgil" Height="720" Width="1180"
        WindowStartupLocation="CenterScreen"
        Background="#0F1013">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="48"/>   <!-- top bar -->
            <RowDefinition Height="*"/>    <!-- main -->
        </Grid.RowDefinitions>

        <!-- Top bar -->
        <DockPanel Grid.Row="0" LastChildFill="False" Margin="10,0,10,0">
            <TextBlock x:Name="ClockText"
                       DockPanel.Dock="Left"
                       VerticalAlignment="Center"
                       FontSize="16"
                       Foreground="#DDE1E8"
                       Text="--:--:--"/>
            <ToggleButton x:Name="SurveillanceToggle"
                          DockPanel.Dock="Right"
                          Width="180" Height="28"
                          Margin="8,0,0,0"
                          Content="{Binding SurveillanceToggleText}"
                          Checked="SurveillanceToggle_Checked"
                          Unchecked="SurveillanceToggle_Unchecked"/>
            <Button x:Name="OpenConfig"
                    DockPanel.Dock="Right"
                    Width="150" Height="28"
                    Content="Ouvrir configuration"
                    Click="OpenConfig_Click"/>
        </DockPanel>

        <!-- Main split -->
        <Grid Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="360"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="360"/>
            </Grid.ColumnDefinitions>

            <!-- Panneau gauche : Avatar + stats -->
            <StackPanel Grid.Column="0" Margin="16" >
                <controls:AvatarControl x:Name="AvatarControl"
                                        Height="220" />
                <!-- Jauges simples -->
                <StackPanel Margin="0,16,0,0">
                    <TextBlock Text="CPU" Foreground="#B8C0CC" Margin="0,0,0,4"/>
                    <ProgressBar x:Name="CpuBar" Height="10"/>
                    <TextBlock Text="GPU" Foreground="#B8C0CC" Margin="0,12,0,4"/>
                    <ProgressBar x:Name="GpuBar" Height="10"/>
                    <TextBlock Text="RAM" Foreground="#B8C0CC" Margin="0,12,0,4"/>
                    <ProgressBar x:Name="RamBar" Height="10"/>
                    <TextBlock Text="Disque" Foreground="#B8C0CC" Margin="0,12,0,4"/>
                    <ProgressBar x:Name="DiskBar" Height="10"/>
                </StackPanel>
            </StackPanel>

            <!-- Zone de chat -->
            <Border Grid.Column="1" Margin="8" CornerRadius="8" Background="#151821">
                <ScrollViewer x:Name="ChatScroll" VerticalScrollBarVisibility="Auto">
                    <ItemsControl x:Name="ChatItems"/>
                </ScrollViewer>
            </Border>

            <!-- Zone actions -->
            <StackPanel Grid.Column="2" Margin="16">
                <TextBlock Text="Actions" Foreground="#DDE1E8" FontSize="18" Margin="0,0,0,12"/>
                <Button Content="Maintenance complète" Margin="0,0,0,8" Click="Action_MaintenanceComplete"/>
                <Button Content="Nettoyage intelligent" Margin="0,0,0,8" Click="Action_CleanTemp"/>
                <Button Content="Nettoyer navigateurs" Margin="0,0,0,8" Click="Action_CleanBrowsers"/>
                <Button Content="Tout mettre à jour" Margin="0,0,0,8" Click="Action_UpdateAll"/>
                <Button Content="Defender (MAJ + Scan)" Margin="0,0,0,8" Click="Action_Defender"/>
            </StackPanel>
        </Grid>
    </Grid>
</Window>
