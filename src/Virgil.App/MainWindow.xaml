<Window x:Class="Virgil.App.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:controls="clr-namespace:Virgil.App.Controls"
        Title="Virgil — tableau de bord" Height="760" Width="1100"
        WindowStartupLocation="CenterScreen">
    <Grid Margin="14">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- En-tête -->
        <DockPanel Grid.Row="0" Margin="0,0,0,10">
            <TextBlock Text="Virgil" FontSize="22" FontWeight="Bold" />
            <Border CornerRadius="16" Background="#111" Padding="6,2" Margin="10,0,0,0" VerticalAlignment="Center">
                <TextBlock Foreground="#8bd" Text="build ready" />
            </Border>
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" DockPanel.Dock="Right">
                <controls:VirgilAvatar x:Name="AvatarControl" Width="64" Height="64" Margin="8,0,0,0"/>
            </StackPanel>
        </DockPanel>

        <!-- Boutons -->
        <WrapPanel Grid.Row="1" Margin="0,0,0,10">
            <!-- Maintenance -->
            <Button Content="Maintenance rapide" Click="QuickMaintenanceButton_Click" Margin="0,0,6,6" Padding="10,6"/>
            <Button Content="Maintenance complète" Click="FullMaintenanceButton_Click" Margin="0,0,12,6" Padding="10,6"/>

            <!-- Nettoyage -->
            <Button Content="Nettoyer TEMP" Click="CleanButton_Click" Margin="0,0,6,6" Padding="10,6"/>
            <Button Content="Nettoyer navigateurs (caches)" Click="CleanBrowsersButton_Click" Margin="0,0,6,6" Padding="10,6"/>
            <Button Content="Nettoyage étendu" Click="CleanExtendedButton_Click" Margin="0,0,12,6" Padding="10,6"/>

            <!-- Mises à jour -->
            <Button Content="MAJ apps/jeux (winget)" Click="UpdateButton_Click" Margin="0,0,6,6" Padding="10,6"/>
            <Button Content="MAJ pilotes (best-effort)" Click="DriverButton_Click" Margin="0,0,12,6" Padding="10,6"/>

            <!-- Windows Update -->
            <Button Content="WU : Scan" Click="WindowsUpdateButton_Click" Margin="0,0,6,6" Padding="10,6"/>
            <Button Content="WU : Download" Click="WindowsUpdateDownloadButton_Click" Margin="0,0,6,6" Padding="10,6"/>
            <Button Content="WU : Install" Click="WindowsUpdateInstallButton_Click" Margin="0,0,6,6" Padding="10,6"/>
            <Button Content="WU : Restart" Click="WindowsUpdateRestartButton_Click" Margin="0,0,12,6" Padding="10,6"/>

            <!-- Monitoring -->
            <Button x:Name="MonitorButton" Content="Start Monitoring" Click="MonitorButton_Click" Margin="0,0,6,6" Padding="10,6"/>
            <Button Content="Lire températures" Click="ReadTempsButton_Click" Margin="0,0,12,6" Padding="10,6"/>

            <!-- Processus -->
            <Button Content="Top processus (RAM)" Click="ProcessesButton_Click" Margin="0,0,6,6" Padding="10,6"/>
            <TextBox x:Name="KillPidBox" Width="120" Margin="0,0,6,6" ToolTip="PID à terminer"/>
            <Button Content="Kill PID" Click="KillPidButton_Click" Margin="0,0,12,6" Padding="10,6"/>

            <!-- Services -->
            <Button Content="Services : lister" Click="ListServicesButton_Click" Margin="0,0,6,6" Padding="10,6"/>
            <TextBox x:Name="SvcNameBox" Width="240" Margin="0,0,6,6" ToolTip="Nom du service (ex : wuauserv)"/>
            <Button Content="Start" Click="StartServiceButton_Click" Margin="0,0,6,6" Padding="10,6"/>
            <Button Content="Stop" Click="StopServiceButton_Click" Margin="0,0,6,6" Padding="10,6"/>
            <Button Content="Restart" Click="RestartServiceButton_Click" Margin="0,0,6,6" Padding="10,6"/>
        </WrapPanel>

        <!-- Progress + état -->
        <Grid Grid.Row="2" Margin="0,0,0,10">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="220"/>
            </Grid.ColumnDefinitions>

            <ProgressBar x:Name="TaskProgress" Height="16" Minimum="0" Maximum="100" Value="0" />
            <TextBlock x:Name="StatusText" Grid.Column="1" Margin="10,0,0,0"
                       VerticalAlignment="Center" Text="Prêt." Foreground="#6EE" FontFamily="Consolas" />
        </Grid>

        <!-- Sortie -->
        <TextBox x:Name="OutputBox" Grid.Row="3"
                 FontFamily="Consolas" FontSize="13"
                 AcceptsReturn="True" IsReadOnly="True"
                 VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Auto"
                 TextWrapping="NoWrap" />

        <!-- Bandeau utilitaires -->
        <StackPanel Grid.Row="4" Orientation="Horizontal" Margin="0,10,0,0" HorizontalAlignment="Right">
            <Button Content="Copier journal" Click="CopyLogButton_Click" Padding="10,6" Margin="0,0,6,0"/>
            <Button Content="Exporter journal" Click="ExportLogButton_Click" Padding="10,6" Margin="0,0,12,0"/>
            <Separator Width="12" />
            <Button Content="Ouvrir : Gestionnaire périph." Click="OpenDeviceManagerButton_Click" Padding="10,6" Margin="0,0,6,0"/>
            <Button Content="Ouvrir : Nettoyage disque" Click="OpenDiskCleanupButton_Click" Padding="10,6" Margin="0,0,6,0"/>
            <Button Content="Ouvrir : Services" Click="OpenServicesConsoleButton_Click" Padding="10,6" Margin="0,0,12,0"/>
            <Separator Width="12" />
            <Button Content="Flush DNS" Click="FlushDnsButton_Click" Padding="10,6"/>
        </StackPanel>
    </Grid>
</Window>
