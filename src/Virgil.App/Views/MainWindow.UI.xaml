<UserControl x:Class="Virgil.App.Views.MainWindowUI"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:controls="clr-namespace:Virgil.App.Controls"
             x:Name="Root"
             Background="#111318">
    <UserControl.Resources>
        <x:String x:Key="SurveillanceToggleText">Démarrer la surveillance</x:String>
        <Style TargetType="TextBlock">
            <Setter Property="Foreground" Value="White"/>
        </Style>
        <Style TargetType="Label">
            <Setter Property="Foreground" Value="White"/>
        </Style>
        <Style TargetType="ProgressBar">
            <Setter Property="Height" Value="10"/>
            <Setter Property="Margin" Value="0,6,0,12"/>
        </Style>
        <SolidColorBrush x:Key="CardBrush" Color="#1D232A"/>
    </UserControl.Resources>

    <Grid Margin="16">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- TOP BAR -->
        <DockPanel Grid.Row="0" Margin="0,0,0,12">
            <TextBlock Text="VIRGIL — Assistant Système" FontSize="18" FontWeight="Bold"
                       VerticalAlignment="Center" DockPanel.Dock="Left"/>
            <TextBlock x:Name="ClockText" x:FieldModifier="public" Text="--:--:--" FontSize="16"
                       VerticalAlignment="Center" DockPanel.Dock="Right"/>
            <ToggleButton x:Name="SurveillanceToggle" x:FieldModifier="public"
                          DockPanel.Dock="Right"
                          Margin="12,0,24,0"
                          Width="220" Height="30"
                          Content="{DynamicResource SurveillanceToggleText}"
                          IsChecked="False"/>
        </DockPanel>

        <!-- MAIN -->
        <Grid Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="2*"/>
                <ColumnDefinition Width="3*"/>
            </Grid.ColumnDefinitions>

            <!-- Avatar + gauges -->
            <Border Background="{StaticResource CardBrush}" CornerRadius="10" Padding="16">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>

                    <controls:AvatarControl x:Name="AvatarControl" x:FieldModifier="public" Grid.Row="0"/>

                    <StackPanel Grid.Row="1" Margin="0,16,0,0">
                        <Label Content="CPU"/>
                        <ProgressBar x:Name="CpuBar" x:FieldModifier="public" Minimum="0" Maximum="100"/>
                        <Label Content="RAM"/>
                        <ProgressBar x:Name="RamBar" x:FieldModifier="public" Minimum="0" Maximum="100"/>
                        <Label Content="GPU"/>
                        <ProgressBar x:Name="GpuBar" x:FieldModifier="public" Minimum="0" Maximum="100"/>
                        <Label Content="Disque"/>
                        <ProgressBar x:Name="DiskBar" x:FieldModifier="public" Minimum="0" Maximum="100"/>
                    </StackPanel>
                </Grid>
            </Border>

            <!-- Chat -->
            <Border Grid.Column="1" Background="{StaticResource CardBrush}" CornerRadius="10" Padding="12">
                <ScrollViewer x:Name="ChatScroll" x:FieldModifier="public" VerticalScrollBarVisibility="Auto">
                    <ItemsControl x:Name="ChatItems" x:FieldModifier="public">
                        <ItemsControl.ItemsPanel>
                            <ItemsPanelTemplate>
                                <StackPanel/>
                            </ItemsPanelTemplate>
                        </ItemsControl.ItemsPanel>
                    </ItemsControl>
                </ScrollViewer>
            </Border>
        </Grid>

        <!-- ACTIONS -->
        <Border Grid.Row="2" Background="{StaticResource CardBrush}" CornerRadius="10" Padding="12" Margin="0,12,0,0">
            <UniformGrid Rows="1" Columns="6">
                <!-- IMPORTANT : plus de Click dans le XAML ; on les câble côté MainWindow -->
                <Button x:Name="BtnMaintenance"   x:FieldModifier="public" Content="Maintenance complète"  Margin="6" Height="36"/>
                <Button x:Name="BtnCleanTemp"     x:FieldModifier="public" Content="Nettoyage intelligent" Margin="6" Height="36"/>
                <Button x:Name="BtnCleanBrowsers" x:FieldModifier="public" Content="Nettoyer navigateurs"  Margin="6" Height="36"/>
                <Button x:Name="BtnUpdateAll"     x:FieldModifier="public" Content="Tout mettre à jour"    Margin="6" Height="36"/>
                <Button x:Name="BtnDefender"      x:FieldModifier="public" Content="Defender (MAJ + Scan)" Margin="6" Height="36"/>
                <Button x:Name="BtnOpenConfig"    x:FieldModifier="public" Content="Ouvrir configuration"  Margin="6" Height="36"/>
            </UniformGrid>
        </Border>
    </Grid>
</UserControl>
