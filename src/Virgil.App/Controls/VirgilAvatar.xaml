<UserControl x:Class="Virgil.App.Controls.VirgilAvatar"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             mc:Ignorable="d"
             d:DesignWidth="220"
             d:DesignHeight="220">
  <UserControl.Resources>
    <!-- Halo doux -->
    <Storyboard x:Key="MoodPulse">
      <DoubleAnimation Storyboard.TargetName="Glow"
                       Storyboard.TargetProperty="Opacity"
                       From="0" To="0.6"
                       Duration="0:0:0.6" AutoReverse="True"/>
      <DoubleAnimation Storyboard.TargetName="GlowScale"
                       Storyboard.TargetProperty="ScaleX"
                       From="1" To="1.08"
                       Duration="0:0:0.6" AutoReverse="True"/>
      <DoubleAnimation Storyboard.TargetName="GlowScale"
                       Storyboard.TargetProperty="ScaleY"
                       From="1" To="1.08"
                       Duration="0:0:0.6" AutoReverse="True"/>
    </Storyboard>
  </UserControl.Resources>

  <Grid>
    <!-- Halo -->
    <Ellipse x:Name="Glow" Width="220" Height="220" Opacity="0">
      <Ellipse.RenderTransform>
        <ScaleTransform x:Name="GlowScale" CenterX="110" CenterY="110"/>
      </Ellipse.RenderTransform>
    </Ellipse>

    <!-- Disque visage -->
    <Ellipse x:Name="Face"
             Width="200" Height="200"
             Fill="{Binding FaceFill, RelativeSource={RelativeSource AncestorType=UserControl}}"
             Stroke="White" StrokeThickness="6"/>

    <!-- =======================
         PALETTE D'YEUX (groupes)
         ======================= -->

    <!-- par défaut : deux ronds blancs -->
    <Grid x:Name="EyesDefault" Width="120" Height="50"
          HorizontalAlignment="Center" VerticalAlignment="Center">
      <Ellipse Width="26" Height="26" Fill="White" HorizontalAlignment="Left"/>
      <Ellipse Width="26" Height="26" Fill="White" HorizontalAlignment="Right"/>
    </Grid>

    <!-- angry : yeux “plissés” (paupières inclinées) -->
    <Grid x:Name="EyesAngry" Width="140" Height="60"
          HorizontalAlignment="Center" VerticalAlignment="Center" Visibility="Collapsed">
      <Grid.RenderTransform>
        <TransformGroup>
          <ScaleTransform ScaleX="1" ScaleY="1"/>
        </TransformGroup>
      </Grid.RenderTransform>
      <!-- fond blanc -->
      <Ellipse Width="26" Height="18" Fill="White" HorizontalAlignment="Left" Margin="0,10,0,0"/>
      <Ellipse Width="26" Height="18" Fill="White" HorizontalAlignment="Right" Margin="0,10,0,0"/>
      <!-- paupières (traits obliques verts du visage par-dessus pour “fermer”) -->
      <Rectangle Width="22" Height="2" Fill="#0E1116" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="2,10,0,0">
        <Rectangle.RenderTransform><RotateTransform Angle="-20" CenterX="11" CenterY="1"/></Rectangle.RenderTransform>
      </Rectangle>
      <Rectangle Width="22" Height="2" Fill="#0E1116" HorizontalAlignment="Right" VerticalAlignment="Top" Margin="0,10,2,0">
        <Rectangle.RenderTransform><RotateTransform Angle="20" CenterX="11" CenterY="1"/></Rectangle.RenderTransform>
      </Rectangle>
    </Grid>

    <!-- love : cœurs roses à la place des yeux -->
    <Grid x:Name="EyesLove" Width="120" Height="50"
          HorizontalAlignment="Center" VerticalAlignment="Center" Visibility="Collapsed">
      <Path Data="M0,6 A6,6 0 0 1 6,0 A6,6 0 0 1 12,6 L6,12 Z"
            Fill="#E91E63" Width="14" Height="14" HorizontalAlignment="Left"  Margin="6,8,0,0"/>
      <Path Data="M0,6 A6,6 0 0 1 6,0 A6,6 0 0 1 12,6 L6,12 Z"
            Fill="#E91E63" Width="14" Height="14" HorizontalAlignment="Right" Margin="0,8,6,0"/>
    </Grid>

    <!-- larme : œil droit avec goutte -->
    <Grid x:Name="EyesTear" Width="120" Height="50"
          HorizontalAlignment="Center" VerticalAlignment="Center" Visibility="Collapsed">
      <Ellipse Width="26" Height="26" Fill="White" HorizontalAlignment="Left"/>
      <Ellipse Width="26" Height="26" Fill="White" HorizontalAlignment="Right"/>
      <Path Data="M 8,0 C 12,8 12,12 8,18 C 4,12 4,8 8,0 Z"
            Fill="#80CFFF" Width="10" Height="18"
            HorizontalAlignment="Right" Margin="0,24,14,0"/>
    </Grid>

    <!-- sleepy : demi-lunes (paupières baissées) -->
    <Grid x:Name="EyesSleepy" Width="120" Height="50"
          HorizontalAlignment="Center" VerticalAlignment="Center" Visibility="Collapsed">
      <Path Data="M0,12 A12,12 0 0 0 24,12 L24,18 L0,18 Z"
            Fill="White" Width="24" Height="18" HorizontalAlignment="Left"/>
      <Path Data="M0,12 A12,12 0 0 0 24,12 L24,18 L0,18 Z"
            Fill="White" Width="24" Height="18" HorizontalAlignment="Right"/>
    </Grid>

    <!-- clin d'œil : gauche fermé, droit ouvert -->
    <Grid x:Name="EyesWink" Width="120" Height="50"
          HorizontalAlignment="Center" VerticalAlignment="Center" Visibility="Collapsed">
      <Rectangle Width="16" Height="2" Fill="White" HorizontalAlignment="Left" VerticalAlignment="Center"/>
      <Ellipse Width="26" Height="26" Fill="White" HorizontalAlignment="Right"/>
    </Grid>

    <!-- cat : oreilles + moustaches + yeux ronds blancs -->
    <Grid x:Name="EyesCat" Width="120" Height="50"
          HorizontalAlignment="Center" VerticalAlignment="Center" Visibility="Collapsed">
      <Ellipse Width="26" Height="26" Fill="White" HorizontalAlignment="Left"/>
      <Ellipse Width="26" Height="26" Fill="White" HorizontalAlignment="Right"/>
    </Grid>
    <Grid x:Name="CatDecor" Visibility="Collapsed">
      <Path Data="M0,18 L12,0 24,18 Z" Fill="White" Width="24" Height="18"
            HorizontalAlignment="Left"  VerticalAlignment="Top" Margin="40,45,0,0"/>
      <Path Data="M0,18 L12,0 24,18 Z" Fill="White" Width="24" Height="18"
            HorizontalAlignment="Right" VerticalAlignment="Top" Margin="0,45,40,0"/>
      <StackPanel Orientation="Vertical" HorizontalAlignment="Left"  VerticalAlignment="Center" Margin="16,80,0,80">
        <Rectangle Width="40" Height="3" Fill="White" Margin="0,2"/>
        <Rectangle Width="40" Height="3" Fill="White" Margin="0,2"/>
        <Rectangle Width="40" Height="3" Fill="White" Margin="0,2"/>
      </StackPanel>
      <StackPanel Orientation="Vertical" HorizontalAlignment="Right" VerticalAlignment="Center" Margin="0,80,16,80">
        <Rectangle Width="40" Height="3" Fill="White" Margin="0,2"/>
        <Rectangle Width="40" Height="3" Fill="White" Margin="0,2"/>
        <Rectangle Width="40" Height="3" Fill="White" Margin="0,2"/>
      </StackPanel>
    </Grid>

    <!-- devil : yeux “angry” + cornes ; la couleur du disque passe au rouge dans le code-behind -->
    <Grid x:Name="DevilDecor" Visibility="Collapsed">
      <Path Data="M0,16 L10,0 L20,16 Z" Fill="#E74C3C" Width="20" Height="16"
            HorizontalAlignment="Left"  Margin="58,18,0,0"/>
      <Path Data="M0,16 L10,0 L20,16 Z" Fill="#E74C3C" Width="20" Height="16"
            HorizontalAlignment="Right" Margin="0,18,58,0"/>
    </Grid>

  </Grid>
</UserControl>
