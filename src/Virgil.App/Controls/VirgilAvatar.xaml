<UserControl x:Class="Virgil.App.Controls.VirgilAvatar"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             mc:Ignorable="d" d:DesignHeight="260" d:DesignWidth="260">
    <Grid>
        <!-- Glow -->
        <Ellipse x:Name="Glow"
                 Width="210" Height="210"
                 Fill="{Binding GlowColor, Converter={StaticResource ColorToBrushConverter}, FallbackValue=#33FFFFFF}"
                 Opacity="{Binding GlowOpacity}" />

        <!-- Face -->
        <Ellipse Width="200" Height="200"
                 Fill="{Binding FaceBrush}"
                 Stroke="#304050" StrokeThickness="2"
                 Effect="{DynamicResource DropShadowEffect}"/>

        <!-- Eyes group -->
        <Grid>
            <Grid.RenderTransform>
                <TranslateTransform Y="{Binding EyeY}"/>
            </Grid.RenderTransform>

            <!-- Left eye -->
            <Grid Width="60" Height="46"
                  HorizontalAlignment="Left"
                  Margin="{Binding EyeSeparation, ConverterParameter=left, Converter={StaticResource EyeSeparationToMarginConverter}}">
                <Grid.RenderTransform>
                    <TransformGroup>
                        <ScaleTransform ScaleX="{Binding EyeScale}" ScaleY="{Binding EyeScale}"/>
                        <SkewTransform AngleX="{Binding EyeTilt}"/>
                    </TransformGroup>
                </Grid.RenderTransform>
                <Ellipse Fill="{Binding EyeBrush}" />
            </Grid>

            <!-- Right eye -->
            <Grid Width="60" Height="46"
                  HorizontalAlignment="Right"
                  Margin="{Binding EyeSeparation, ConverterParameter=right, Converter={StaticResource EyeSeparationToMarginConverter}}">
                <Grid.RenderTransform>
                    <TransformGroup>
                        <ScaleTransform ScaleX="{Binding EyeScale}" ScaleY="{Binding EyeScale}"/>
                        <SkewTransform AngleX="-{Binding EyeTilt}"/>
                    </TransformGroup>
                </Grid.RenderTransform>
                <Ellipse Fill="{Binding EyeBrush}" />
            </Grid>
        </Grid>

        <!-- DÃ©cors optionnels (coeurs/larme/oreilles...) : Ã  conditionner Ã  tes assets -->
        <TextBlock Text="â¤" FontSize="28" Foreground="#FF66A3" Visibility="{Binding ShowHearts, Converter={StaticResource BoolToVis}}"
                   HorizontalAlignment="Right" VerticalAlignment="Top" Margin="20"/>
        <TextBlock Text="ðŸ’§" FontSize="24" Foreground="#99D8FF" Visibility="{Binding ShowTear, Converter={StaticResource BoolToVis}}"
                   HorizontalAlignment="Left" VerticalAlignment="Top" Margin="20"/>
    </Grid>
</UserControl>
